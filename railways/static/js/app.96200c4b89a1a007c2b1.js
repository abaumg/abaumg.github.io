webpackJsonp([1],{"4Nv0":function(e,t){},HvW6:function(e,t){},LVrL:function(e,t,n){var i=n("/5HI"),o=n("MeRj").place;e.exports=function(e){var t=[],n=[],r=(new Date).toISOString();e.forEachElement(function(e){"node"===e.type?t.push(e):"way"===e.type&&n.push(e)});var a=new i;return o.write({version:1,id:e.id,date:r,name:e.name,nodes:t,ways:n},a),a.finish()}},MeRj:function(e,t,n){"use strict";var i=t.place={};i.read=function(e,t){return e.readFields(i._readField,{version:0,name:"",date:"",id:"",nodes:[],ways:[]},t)},i._readField=function(e,t,n){1===e?t.version=n.readVarint():2===e?t.name=n.readString():3===e?t.date=n.readString():4===e?t.id=n.readString():5===e?t.nodes.push(i.node.read(n,n.readVarint()+n.pos)):6===e&&t.ways.push(i.way.read(n,n.readVarint()+n.pos))},i.write=function(e,t){if(e.version&&t.writeVarintField(1,e.version),e.name&&t.writeStringField(2,e.name),e.date&&t.writeStringField(3,e.date),e.id&&t.writeStringField(4,e.id),e.nodes)for(var n=0;n<e.nodes.length;n++)t.writeMessage(5,i.node.write,e.nodes[n]);if(e.ways)for(n=0;n<e.ways.length;n++)t.writeMessage(6,i.way.write,e.ways[n])},i.node={},i.node.read=function(e,t){return e.readFields(i.node._readField,{id:0,lat:0,lon:0},t)},i.node._readField=function(e,t,n){1===e?t.id=n.readVarint():2===e?t.lat=n.readFloat():3===e&&(t.lon=n.readFloat())},i.node.write=function(e,t){e.id&&t.writeVarintField(1,e.id),e.lat&&t.writeFloatField(2,e.lat),e.lon&&t.writeFloatField(3,e.lon)},i.way={},i.way.read=function(e,t){return e.readFields(i.way._readField,{nodes:[]},t)},i.way._readField=function(e,t,n){1===e&&n.readPackedVarint(t.nodes)},i.way.write=function(e,t){e.nodes&&t.writePackedVarint(1,e.nodes)}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),o=n("Zrlr"),r=n.n(o),a=n("5dBV"),s=n.n(a),c=n("gBtx"),l=n.n(c),u=n("AMV0"),d=n.n(u),h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"loader",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"12",height:"12",fill:"black"}},[t("path",{attrs:{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}}),this._v(" "),t("path",{attrs:{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"}})],1)])},staticRenderFns:[]},f=n("VU/8")(null,h,!1,null,null,null).exports,v=n("woOf"),g=n.n(v),p=n("//Fk"),m=n.n(p),y=n("wxAW"),b=n.n(y),w=n("fZjL"),k=n.n(w),_=n("puH/"),x=n.n(_),C=function(){function e(t){r()(this,e),x()(this),this.callback=t||Function.prototype}return b()(e,[{key:"cancel",value:function(){this.isCancelled=!0,this.fire("cancel")}},{key:"notify",value:function(e){this.isCancelled||this.callback(e)}},{key:"onCancel",value:function(e){this.on("cancel",e,this)}},{key:"offCancel",value:function(e){this.off("cancel",e)}}]),e}();function L(e,t){t||(t={});var n=void 0,i=t.progress||new C;return i.on&&i.onCancel(o),new m.a(function(r,a){n=new XMLHttpRequest,"function"==typeof i.notify&&n.addEventListener("progress",function(e){e.lengthComputable?i.notify({loaded:e.loaded,total:e.total,percent:e.loaded/e.total,lengthComputable:!0}):i.notify({loaded:e.loaded,lengthComputable:!1})},!1);n.addEventListener("load",function(){if(i.offCancel(o),!i.isCancelled)if(200===n.status){var s=n.response;"json"===t.responseType&&"string"==typeof s&&(s=JSON.parse(s)),setTimeout(function(){return r(s)},0)}else a({statusError:n.status,message:"Unexpected status code "+n.status+" when calling "+e})},!1),n.addEventListener("error",function(){a("Failed to download "+e)},!1),n.addEventListener("abort",function(){a({cancelled:!0,message:"Cancelled download of "+e})},!1),n.open(t.method||"GET",e),t.responseType&&(n.responseType=t.responseType);t.headers&&k()(t.headers).forEach(function(e){n.setRequestHeader(e,t.headers[e])});"POST"===t.method?n.send(t.body):n.send(null)});function o(){!0,n&&n.abort()}}var S=["https://overpass.kumi.systems/api/interpreter","https://overpass-api.de/api/interpreter","https://overpass.openstreetmap.ru/cgi/interpreter"];var F=n("ifoU"),E=n.n(F),T=function(){function e(){r()(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}return b()(e,[{key:"growBy",value:function(e){this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e}},{key:"addPoint",value:function(e,t){if(void 0===e)throw new Error("Point is not defined");var n=e,i=t;void 0===i&&(n=e.x,i=e.y),n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n),i<this.minY&&(this.minY=i),i>this.maxY&&(this.maxY=i)}},{key:"addRect",value:function(e){if(!e)throw new Error("rect is not defined");this.addPoint(e.left,e.top),this.addPoint(e.right,e.top),this.addPoint(e.left,e.bottom),this.addPoint(e.right,e.bottom)}},{key:"merge",value:function(e){e.minX<this.minX&&(this.minX=e.minX),e.minY<this.minY&&(this.minY=e.minY),e.maxX>this.maxX&&(this.maxX=e.maxX),e.maxY>this.maxY&&(this.maxY=e.maxY)}},{key:"left",get:function(){return this.minX}},{key:"top",get:function(){return this.minY}},{key:"right",get:function(){return this.maxX}},{key:"bottom",get:function(){return this.maxY}},{key:"width",get:function(){return this.maxX-this.minX}},{key:"height",get:function(){return this.maxY-this.minY}},{key:"cx",get:function(){return(this.minX+this.maxX)/2}},{key:"cy",get:function(){return(this.minY+this.maxY)/2}}]),e}(),R=n("qC7P"),B=function(){function e(){r()(this,e),this.elements=[],this.bounds=new T,this.nodes=new E.a,this.wayPointCount=0,this.id=0,this.name="",this.isArea=!0,this.projector=void 0}return b()(e,[{key:"setName",value:function(e){this.name=e}},{key:"setId",value:function(e){this.id=e}},{key:"setIsArea",value:function(e){this.isArea=e}},{key:"setBBox",value:function(e){this.bboxString=e}},{key:"hasRoads",value:function(){return this.wayPointCount>0}},{key:"setProjector",value:function(e){this.projector=e}},{key:"getProjectedRect",value:function(){var e=this.bounds,t=this.getProjector(),n=t({lon:e.left,lat:e.bottom}),i=t({lon:e.right,lat:e.top}),o=n.x,r=n.y,a=i.y,s=i.x;return{left:o,top:r,right:s,bottom:a,width:s-o,height:Math.abs(a-r)}}},{key:"forEachElement",value:function(e){this.elements.forEach(e)}},{key:"forEachWay",value:function(e,t,n){var i=this.nodes,o=this.getProjector();this.elements.forEach(function(r){if("way"===r.type){var a=r.nodes,s=i.get(a[0]);if(s){var c=o(s);t&&t(r);for(var l=1;l<a.length;++l)if(s=i.get(a[l])){var u=o(s);e(c,u),c=u}n&&n(r)}}})}},{key:"getProjector",value:function(){var e=[0,0];this.projector||(this.projector=Object(R.a)(),this.projector.center([this.bounds.cx,this.bounds.cy]).scale(6371393));var t=this.projector;return function(n){var i=n.lon,o=n.lat;e[0]=i,e[1]=o;var r=t(e);return{x:r[0],y:-r[1]}}}}],[{key:"fromPBF",value:function(t){if(1!==t.version)throw new Error("Unknown version "+t.version);var n=[];t.nodes.forEach(function(e){e.type="node",n.push(e)}),t.ways.forEach(function(e){e.type="way",n.push(e)});var i=e.fromOSMResponse(n);return i.setName(t.name),i.setId(t.id),i}},{key:"fromOSMResponse",value:function(t){var n=new e,i=n.nodes,o=n.bounds,r=0;return t.forEach(function(e){"node"===e.type?(i.set(e.id,e),o.addPoint(e.lon,e.lat)):"way"===e.type&&(r+=e.nodes.length)}),n.elements=t,n.wayPointCount=r,n}}]),e}(),I=new E.a;function z(e){var t=I.get(e);return t?m.a.resolve(t):L("https://nominatim.openstreetmap.org/search?format=json&q="+encodeURIComponent(e),{responseType:"json"}).then(P).then(function(t){return I.set(e,t),t})}function P(e){return e.map(function(e){var t=void 0,n=void 0;return"relation"===e.osm_type?t=e.osm_id+36e8:"way"===e.osm_type&&(t=e.osm_id+24e8),e.boundingbox&&(n=[s()(e.boundingbox[0]),s()(e.boundingbox[2]),s()(e.boundingbox[1]),s()(e.boundingbox[3])]),{areaId:t,bbox:n,lat:e.lat,lon:e.lon,osmId:e.osm_id,osmType:e.osm_type,name:e.display_name,type:e.type}})}var A=function(){function e(t,n){r()(this,e),this.queryBounds=t.bounds,this.queryString=t.queryString,this.progress=n,this.promise=null}return b()(e,null,[{key:"runFromOptions",value:function(t,n){return t.getQueryTemplate().then(function(t){return new e(t,n).run()})}}]),b()(e,[{key:"run",value:function(){var e=this;if(this.promise)return this.promise;var t=function(e){var t=/{{geocode(.+?):(.+?)}}/,n=void 0,i=[];for(;n=e.match(t);)i.push(e.substr(0,n.index)),i.push({geoType:n[1],name:n[2]}),e=e.substr(n.index+n[0].length);return i.push(e),i}(this.queryString);return this.promise=function(e){var t=0;return function n(){if(t>=e.length)return m.a.resolve();var i=e[t];t+=1;if("string"==typeof i)return n();return z(i.name).then(j).then(function(e){if(!e)throw new Error("No areas found for request "+i.name);g()(i,e)}).then((o=1e3,function(e){return new m.a(function(t){setTimeout(function(){return t(e)},o)})})).then(n);var o}().then(function(){return e.map(function(e){return"string"==typeof e?e:"Area"===e.geoType?"area("+e.areaId+")":"Coords"===e.geoType?e.lat+","+e.lon:"Id"===e.geoType?e.osmType+"("+e.osmId+")":"Bbox"===e.geoType?e.bbox.join(","):void 0}).join("")})}(t).then(function(t){return function(e,t){var n={method:"POST",responseType:"json",progress:t=t||new C,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(e)},i=0;return o(S[i]);function o(e){return L(e,n).catch(r)}function r(e){if(e.cancelled)throw e;if(i>=S.length-1)throw e;return e.statusError&&t.notify({loaded:-1}),o(S[i+=1])}}(t,e.progress)}).then(function(t){var n=B.fromOSMResponse(t.elements);return n.queryBounds=e.queryBounds,n}),this.promise}}]),e}();A.All="way",A.Building="way[building]",A.Road='way[railway~"^(funicular|light_rail|miniature|monorail|narrow_gauge|rail|subway|tram|halt|platform|station)"]',A.RoadBasic='way[railway~"^(funicular|light_rail|miniature|monorail|narrow_gauge|rail|subway|tram|halt|platform|station)"]',A.RoadStrict='way[highway~"^(motorway|primary|secondary|tertiary)|residential"]';var M=A;function j(e){if(e.length>0)return e[0]}var q=n("3zJd"),O=n.n(q)()({},{useSearch:!0}),U={isCacheEnabled:function(){return 0!=O.get("cache")},enableCache:function(){return O.unset("cache")},get:function(){return O.get.apply(O,arguments)},set:function(){return O.set.apply(O,arguments)},unset:function(){return O.unset.apply(O,arguments)},unsetPlace:function(){O.unset("areaId"),O.unset("osm_id"),O.unset("bbox")}},D=n("YrBu"),G=n.n(D),V={areaServer:"http://localhost",getDefaultLineColor:function(){return G()("rgba(26, 26, 26, 0.8)")},getLabelColor:function(){return G()("#161616")},getBackgroundColor:function(){return G()("#F7F2E8")}},Y=function(){function e(t){r()(this,e),this.place=void 0,this.projector=void 0,this.wayFilter=void 0,this.timeout=900,this.maxHeapByteSize=1073741824,this.outputMethod="skel",g()(this,t)}return b()(e,null,[{key:"parse",value:function(t,n,i){var o=new e;if("string"==typeof i&&(o.place=i),n&&(o.wayFilter=n),!i)return o;g()(o,i);var r=function(e,t){if(void 0===t)return;if("number"==typeof t){var n=e.queryLayerAll();return n[t]}return"string"==typeof t?e.queryLayer(t):t}(t,i.layer);if(r){o.projector=r.getGridProjector();var a=r.getQueryBounds();!a||o.place||o.areaId||o.bbox||(o.place=a.place,o.areaId=a.areaId,o.bbox=a.bbox)}return i.projector&&(o.projector=projector),o}}]),b()(e,[{key:"getQueryTemplate",value:function(){var e=this;if(this.raw)return m.a.resolve({queryString:this.raw});if(!this.wayFilter)throw new Error("Way filter is required");return this.getBounds().then(function(t){var n=void 0;if(t.areaId)n="[timeout:"+e.timeout+"][maxsize:"+e.maxHeapByteSize+"][out:json];\narea("+t.areaId+");\n(._; )->.area;\n("+e.wayFilter+"(area.area); node(w););\nout "+e.outputMethod+";";else if(t.bbox){var i=function(e){return e&&e.join(",")}(t.bbox);n="[timeout:"+e.timeout+"][maxsize:"+e.maxHeapByteSize+"][bbox:"+i+"][out:json];\n("+e.wayFilter+"; node(w););\nout "+e.outputMethod+";"}return{bounds:t,queryString:n}})}},{key:"getBounds",value:function(){if(this.place)return z(this.place).then(function(e){return e&&e[0]});if(this.areaId)return m.a.resolve({areaId:this.areaId});if(this.bbox)return m.a.resolve({bbox:this.bbox});throw new Error("Please specify bounding area for the query (place|areaId|bbox)")}}]),e}();var H={name:"FindPlace",components:{LoadingIcon:f},data:function(){var e=U.get("q")||"",t=N();return{enteredInput:e,loading:null,lastCancel:null,suggestionsLoaded:!1,boxInTheMiddle:!0,stillLoading:0,error:null,hideInput:!1,noRoads:!1,clicked:!1,showWarning:t,mainActionText:t?"Download Area":"Find City Bounds",suggestions:[]}},watch:{enteredInput:function(){this.mainActionText="Find City Bounds",this.showWarning=!1,this.hideInput=!1,U.unsetPlace()}},mounted:function(){this.$refs.input.focus()},beforeDestroy:function(){this.lastCancel&&this.lastCancel(),clearInterval(this.notifyStillLoading)},methods:{onSubmit:function(){var e=this;U.set("q",this.enteredInput),this.cancelRequest(),this.suggestions=[],this.noRoads=!1,this.error=!1,this.showWarning=!1;var t=N(this.enteredInput);if(t)this.pickSuggestion(t);else{encodeURIComponent(this.enteredInput);this.loading="Searching cities that match your query...",z(this.enteredInput).then(function(t){e.loading=null,e.hideInput=t&&t.length,e.boxInTheMiddle?(e.boxInTheMiddle=!1,setTimeout(function(){e.suggestionsLoaded=!0,e.suggestions=t},50)):(e.suggestionsLoaded=!0,e.suggestions=t)})}},getBugReportURL:function(e){var t=encodeURIComponent("OSM Error"),n="";return e&&(n="Hello, an error occurred on the website:\n\n```\n"+e.toString()+"\n```\n\n Can you please help?"),"https://github.com/anvaka/city-roads/issues/new?title="+t+"&body="+encodeURIComponent(n)},updateProgress:function(e){if(this.stillLoading=0,clearInterval(this.notifyStillLoading),e.loaded<0)return this.loading="Trying a different server",void this.restartLoadingMonitor();void 0!==e.percent?this.loading="Loaded "+Math.round(100*e.percent)+"% ("+W(e.loaded)+" bytes)...":this.loading="Loaded "+W(e.loaded)+" bytes..."},retry:function(){this.lastSuggestion&&this.pickSuggestion(this.lastSuggestion)},pickSuggestion:function(e){var t=this;this.lastSuggestion=e,this.error=!1,U.isCacheEnabled()&&e.areaId?this.checkCache(e).catch(function(n){if(!n.cancelled)return t.useOSM(e)}):this.useOSM(e)},restartLoadingMonitor:function(){var e=this;clearInterval(this.notifyStillLoading),this.stillLoading=0,this.notifyStillLoading=setInterval(function(){e.stillLoading++},1e4)},checkCache:function(e){var t=this;this.loading="Checking cache...";var i=e.areaId;return L(V.areaServer+"/"+i+".pbf",{progress:this.generateNewProgressToken(),responseType:"arraybuffer"}).then(function(e){return new Uint8Array(e)}).then(function(e){var i=n("/5HI"),o=n("MeRj").place,r=new i(e),a=o.read(r),s=B.fromPBF(a);t.$emit("loaded",s)})},useOSM:function(e){var t=this;this.loading="Connecting to OpenStreetMap...",this.restartLoadingMonitor(),M.runFromOptions(new Y({wayFilter:M.Road,areaId:e.areaId,bbox:e.bbox}),this.generateNewProgressToken()).then(function(n){var i;t.loading=null,n.hasRoads()?(n.setName(e.name),n.setId(e.areaId||e.osm_id),n.setIsArea(e.areaId),n.setBBox((i=e.bbox)&&i.join(",")),t.$emit("loaded",n)):t.noRoads=!0}).catch(function(e){e.cancelled?t.loading=null:(console.error(e),t.error=e,t.loading=null,t.suggestions=[])}).finally(function(){clearInterval(t.notifyStillLoading),t.stillLoading=0})},cancelRequest:function(){this.progressToken&&(this.progressToken.cancel(),this.progressToken=null,this.loading=!1)},generateNewProgressToken:function(){return this.progressToken&&(this.progressToken.cancel(),this.progressToken=null),this.progressToken=new C(this.updateProgress),this.progressToken}}};function W(e){return d()(e)?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"N/A"}function N(e){var t=function(){var e=U.get("areaId");d()(l()(e,10))||(e=null);return e}();if(t)return{name:e,areaId:t};var n=function(){var e=U.get("osm_id");if(!d()(l()(e,10)))return;var t=function(e){if(!e)return null;var t=e.split(",").map(function(e){return s()(e)}).filter(function(e){return d()(e)});return 4===t.length?t:null}(U.get("bbox"));if(!t)return;return{osm_id:e,bbox:t}}();return n?{name:e,osm_id:n.osm_id,bbox:n.bbox}:void 0}var X={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"find-place",class:{centered:e.boxInTheMiddle}},[e.boxInTheMiddle?n("div",[n("h3",{staticClass:"site-header"},[e._v("city roads")]),e._v(" "),n("p",{staticClass:"description"},[e._v("This website renders every single road within a city")])]):e._e(),e._v(" "),n("form",{staticClass:"search-box",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.enteredInput,expression:"enteredInput"}],ref:"input",staticClass:"query-input",attrs:{type:"text",placeholder:"Enter a city name to start"},domProps:{value:e.enteredInput},on:{input:function(t){t.target.composing||(e.enteredInput=t.target.value)}}}),e._v(" "),e.enteredInput&&!e.hideInput?n("a",{staticClass:"search-submit",attrs:{type:"submit",href:"#"},on:{click:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e._v(e._s(e.mainActionText))]):e._e()]),e._v(" "),e.showWarning?n("div",{staticClass:"prompt message note shadow"},[e._v("\n    Note: Large cities may require 200MB+ of data transfer and may need a powerful device to render.\n  ")]):e._e(),e._v(" "),e.loading?e._e():n("div",{staticClass:"results"},[e.suggestionsLoaded&&e.suggestions.length?n("div",{staticClass:"suggestions shadow"},[e._m(0),e._v(" "),n("ul",e._l(e.suggestions,function(t,i){return n("li",{key:i},[n("a",{staticClass:"suggestion",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.pickSuggestion(t)}}},[n("span",[e._v("\n          "+e._s(t.name)+" "),n("small",[e._v("("+e._s(t.type)+")")])])])])}),0)]):e._e(),e._v(" "),!e.suggestionsLoaded||e.suggestions.length||e.loading||e.error?e._e():n("div",{staticClass:"no-results message shadow"},[e._v("\n      Didn't find matching cities. Try a different query?\n    ")]),e._v(" "),e.noRoads?n("div",{staticClass:"no-results message shadow"},[e._v("\n      Didn't find any roads. Try a different query?\n    ")]):e._e()]),e._v(" "),e.error?n("div",{staticClass:"error message shadow"},[n("div",[e._v("Sorry, we were not able to download data from the OpenStreetMap.\n    It could be very busy at the moment processing other requests. "),n("br"),n("br"),e._v(" Please bookmark this website and "),n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.retry(t)}}},[e._v("try again")]),e._v(" later?")]),e._v(" "),n("div",{staticClass:"error-links"},[n("a",{attrs:{href:"https://twitter.com/anvaka/status/1218971717734789120",title:"see what it supposed to do",target:"_blank"}},[e._v("see how it should have worked")]),e._v(" "),n("a",{attrs:{href:e.getBugReportURL(e.error),title:"report error: "+e.error,target:"_blank"}},[e._v("report this bug")])])]):e._e(),e._v(" "),e.loading?n("div",{staticClass:"loading message shadow"},[n("loading-icon"),e._v(" "),n("span",[e._v(e._s(e.loading))]),e._v(" "),n("a",{staticClass:"cancel-request",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.cancelRequest(t)}}},[e._v("cancel")]),e._v(" "),e.stillLoading>0?n("div",{staticClass:"load-padding"},[e._v("\n      Still loading...\n    ")]):e._e(),e._v(" "),e.stillLoading>1?n("div",{staticClass:"load-padding"},[e._v("\n      Sorry it takes so long!\n    ")]):e._e()],1):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"prompt message"},[t("div",[this._v("Select boundaries below to download all roads within")]),this._v(" "),t("div",{staticClass:"note"},[this._v("large cities may require 200MB+ of data transfer and a powerful device")])])}]};var $=n("VU/8")(H,X,!1,function(e){n("4Nv0")},null,null).exports,J=[],Q="@@clickoutsideContext",Z=void 0,K=0;function ee(e,t,n){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.context&&i.target&&o.target&&!e.contains(i.target)&&!e.contains(o.target)&&e!==i.target&&(!n.context.popperElm||!n.context.popperElm.contains(i.target)&&!n.context.popperElm.contains(o.target))){var r=e[Q].methodName;t.expression&&r&&n.context[r]?n.context[r]():e[Q].bindingFn&&e[Q].bindingFn()}}}document.addEventListener("mousedown",function(e){return Z=e},!0),document.addEventListener("mouseup",function(e){J.forEach(function(t){return t[Q].documentHandler(e,Z)})},!0),document.addEventListener("touchstart",function(e){Z=e},!0),document.addEventListener("touchend",function(e){J.forEach(function(t){return t[Q].documentHandler(e,Z)})},!0);var te={bind:function(e,t,n){J.push(e);var i=K++;e[Q]={id:i,documentHandler:ee(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[Q].documentHandler=ee(e,t,n),e[Q].methodName=t.expression,e[Q].bindingFn=t.value},unbind:function(e){for(var t=J.length,n=0;n<t;n++)if(J[n][Q].id===e[Q].id){J.splice(n,1);break}delete e[Q]}},ne={name:"EditableLabel",props:["value","printable","overlayManager"],directives:{ClickOutside:te},mounted:function(){this.$el.receiveFocus=this.focus,this.$el.style.pointerEvents="none"},methods:{looseFocus:function(){this.$refs.input.blur()},focus:function(){this.$refs.input.focus()}}},ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.looseFocus,expression:"looseFocus"}],staticClass:"can-drag"},[n("div",{staticClass:"editable-label"},[n("span",{class:{printable:e.printable}},[e._v(e._s(e.value))]),e._v(" "),n("input",{ref:"input",domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])])},staticRenderFns:[]};var oe=n("VU/8")(ne,ie,!1,function(e){n("WJCp")},null,null).exports,re=n("Zzkc"),ae={name:"vue-colorpicker",components:{"sketch-picker":re.Sketch},directives:{ClickOutside:te},props:{value:{type:Object}},data:function(){return{showPicker:!1,colors:{hex:"#FFFFFF",a:1},colorValue:"#FFFFFF",panelLeft:"0px",panelTop:"0px"}},computed:{pickerType:function(){return"sketch-picker"},isTransparent:function(){return 0===this.colors.a},btnStyle:function(){if(this.isTransparent)return{background:"#eee",backgroundImage:"linear-gradient(45deg, rgba(0,0,0,.25) 25%, transparent 0, transparent 75%,rgba(0,0,0,.25)0), linear-gradient(45deg, rgba(0,0,0,.25)25%,transparent 0, transparent 75%,rgba(0,0,0,.25)0)",backgroundPosition:"0 0, 11px 11px",backgroundSize:"22px 22px"};var e=this.colorValue;return{background:"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"}}},watch:{value:function(e,t){e!==t&&this.updateColorObject(e)},showPicker:function(e){if(e){var t=this.$refs.triggerButton.getBoundingClientRect(),n=t.x,i=t.bottom;t.y+320>window.innerHeight&&(i=Math.max(0,window.innerHeight-320),n+=36),n+220>window.innerWidth&&(n=Math.max(0,window.innerWidth-220)),this.panelLeft=n+"px",this.panelTop=i+"px"}}},methods:{hide:function(){this.showPicker=!1},changeColor:function(e){this.colorValue=e.rgba,this.$emit("input",this.colorValue),this.$emit("change",this.colorValue)},updateColorObject:function(e){if(e){var t=G()(e);this.colors=e&&"transparent"!==e?{hex:t.toHexString(),hsl:t.toHsl(),hsv:t.toHsv(),rgba:t.toRgb(),a:t.getAlpha()}:{hex:"#FFFFFF",hsl:{h:0,s:0,l:1,a:0},hsv:{h:0,s:0,v:1,a:0},rgba:{r:255,g:255,b:255,a:0},a:0},this.colorValue=this.colors.rgba}}},mounted:function(){this.updateColorObject(this.value)}},se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],staticClass:"vue-colorpicker",on:{click:function(t){e.showPicker=!0}}},[n("span",{ref:"triggerButton",staticClass:"vue-colorpicker-btn",style:e.btnStyle}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPicker,expression:"showPicker"}],staticClass:"vue-colorpicker-panel",style:{left:e.panelLeft,top:e.panelTop}},[n(e.pickerType,{tag:"component",on:{input:e.changeColor},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)])},staticRenderFns:[]};var ce=n("VU/8")(ae,se,!1,function(e){n("Z2f9")},"data-v-a5fc1b7c",null).exports,le=x()({}),ue=n("skHk"),de=0,he=function(){function e(){r()(this,e),this._color=V.getDefaultLineColor(),this.grid=null,this.lines=null,this.scene=null,this.dx=0,this.dy=0,this.scale=1,this.hidden=!1,this.id="paths_"+de,this._lineWidth=1,de+=1}return b()(e,[{key:"color",get:function(){return this._color},set:function(e){var t=G()(e);this._color=t,this.lines&&(this.lines.color=fe(t.toRgb())),this.scene&&this.scene.renderFrame()}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(e){this._lineWidth=e,this.lines&&this.scene&&this.lines.setLineWidth(e)}}]),b()(e,[{key:"getGridProjector",value:function(){if(this.grid)return this.grid.projector}},{key:"getQueryBounds",value:function(){var e=this.grid;if(e){if(e.queryBounds)return e.queryBounds;if(e.isArea)return{areaId:e.id}}}},{key:"setGrid",value:function(e){this.grid=e,this.scene&&this.bindToScene(this.scene)}},{key:"getViewBox",value:function(){if(!this.grid)return null;var e=this.grid.getProjectedRect(),t=e.width,n=e.height,i=Math.max(t,n)/4;return{left:-i,top:i,right:i,bottom:-i}}},{key:"moveTo",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.warn("Please use moveBy() instead. The moveTo() is under construction")}},{key:"moveBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.dx=e,this.dy=t,this._transferTransform()}},{key:"buildLinesCollection",value:function(){if(this.lines)return this.lines;var e=this.grid,t=new ue.WireCollection(e.wayPointCount,{width:this._lineWidth,allowColors:!1,is3D:!1});e.forEachWay(function(e,n){t.add({from:e,to:n})});var n=G()(this._color).toRgb();t.color=fe(n),t.id=this.id,this.lines=t}},{key:"destroy",value:function(){this.scene&&this.lines&&this.scene.removeChild(this.lines)}},{key:"bindToScene",value:function(e){this.scene&&this.lines&&console.error("You seem to be adding this layer twice..."),this.scene=e,this.grid&&(this.buildLinesCollection(),this.hidden||this.scene.appendChild(this.lines))}},{key:"hide",value:function(){this.hidden||(this.hidden=!0,this.scene&&this.grid&&this.scene.removeChild(this.lines))}},{key:"show",value:function(){this.hidden&&(this.hidden=!1,this.scene&&this.grid?this.scene.appendChild(this.lines):console.log("Layer will be shown when grid is available"))}},{key:"_transferTransform",value:function(){this.lines&&(this.lines.translate([this.dx,this.dy,0]),this.lines.updateWorldTransform(!0),this.scene&&this.scene.renderFrame(!0))}}]),e}();function fe(e){return{r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}}var ve=n("c/Tr"),ge=n.n(ve),pe=n("Dd8w"),me=n.n(pe),ye=(n("LVrL"),n("KmDb")),be=n.n(ye),we=(n("MeRj").place,n("skHk"));function ke(e,t){var n=e.getRenderer(),i={open:function(){return"\x3c!-- Generator: https://github.com/anvaka/city-roads\nData © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright\n--\x3e"},close:function(){return e=n.getPixelRatio(),t.printable.map(function(t){if(t.element instanceof SVGSVGElement){var n=t.bounds,i=(n.left,n.top,t.element);i.setAttribute("x",n.left*e),i.setAttribute("y",n.top*e),i.setAttribute("width",n.width*e),i.setAttribute("height",n.height*e);var o=(new XMLSerializer).serializeToString(t.element);return i.removeAttribute("x"),i.removeAttribute("y"),i.removeAttribute("width"),i.removeAttribute("height"),o}var r=t;if(r.text){var a=r.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),s=r.bounds,c=(s.right-r.paddingRight)*e,l=(s.bottom-r.paddingBottom)*e,u=r.fontSize*e,d=r.fontFamily.replace(/"/g,"'");return'<text text-anchor="end" x="'+c+'" y="'+l+'" fill="'+r.color+'" font-family="'+d+'" font-size="'+u+'">'+a+"</text>"}}).filter(function(e){return e}).join("\n");var e}};return t.minLength&&(i.beforeWrite=function(e){for(var n=0,i=1;i<e.length;++i)if((n+=be()(e[i].x-e[i-1].x,e[i].y-e[i-1].y))>t.minLength)return!0;return n>t.minLength}),i.round=t.round,we.toSVG(n,i)}function _e(e){var t=xe(),n=t.width,i=t.height,o=document.createElement("canvas"),r=o.getContext("2d");return o.width=n,o.height=i,e.render(),r.drawImage(t,0,0,t.width,t.height,0,0,n,i),m.a.all(Le().map(function(e){return function(e,t){return e?new m.a(function(n,i){var o=window.devicePixelRatio||1;if(e.element instanceof SVGSVGElement){var r=e.element,a=e.bounds,s=new Image;s.width=a.width*o,s.height=a.height*o,s.onload=function(){t.drawImage(s,a.left*o,a.top*o,s.width,s.height),r.removeAttribute("width"),r.removeAttribute("height"),n()},r.setAttribute("width",s.width),r.setAttribute("height",s.height),s.src="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(r))}else t.save(),t.font=o*e.fontSize+"px "+e.fontFamily,t.fillStyle=e.color,t.textAlign="end",t.fillText(e.text,(e.bounds.right-e.paddingRight)*o,(e.bounds.bottom-e.paddingBottom)*o),t.restore(),n()}):m.a.resolve()}(e,r)})).then(function(){return o})}function xe(){return document.querySelector("#canvas")}function Ce(e,t){var n;return((n=e||(new Date).toISOString())?n.replace(/[#%&{}\\/?*><$!'":@+`|=]/g,"_"):"")+(t||"")}function Le(){return ge()(document.querySelectorAll(".printable")).map(function(e){var t=window.getComputedStyle(e),n=e.getBoundingClientRect(),i=l()(t.fontSize,10),o=l()(t.paddingRight,10),r=2*l()(t.paddingBottom,10);return{text:e.innerText,bounds:n,fontSize:i,paddingBottom:r,paddingRight:o,color:t.color,fontFamily:t.fontFamily,fill:t.color,element:e}})}function Se(e){setTimeout(function(){window.URL.revokeObjectURL(e)},45e3)}var Fe=n("skHk");function Ee(e){var t=Fe.createScene(e),n=V.getDefaultLineColor();t.on("transform",function(e){le.fire("scene-transform")}),t.on("append-child",function(e){c.fire("layer-added",e)}),t.on("remove-child",function(e){c.fire("layer-removed",e)}),t.setClearColor(247/255,242/255,232/255,1);var i=t.getCamera();i.setMoveSpeed&&(i.setMoveSpeed(200),i.setRotationSpeed(Math.PI/500));var o=t.getGL();o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA);var r=!1,a=[],s=V.getBackgroundColor();document.addEventListener("keydown",h,!0),document.addEventListener("keyup",f,!0);var c={render:function(){t.renderFrame(!0)},clear:function(){a.forEach(function(e){return e.destroy()}),a=[],t.clear()},queryLayerAll:l,queryLayer:u,getRenderer:function(){return t},getWGL:function(){return Fe},version:function(){return"0.0.2"},dispose:function(){t.clear(),t.dispose(),c.fire("dispose",c),document.removeEventListener("keydown",h,!0),document.removeEventListener("keyup",f,!0)},set lineColor(e){a.forEach(function(t){t.color=e}),n=G()(e),le.fire("line-color",n),c.fire("line-color",n)},get lineColor(){var e=u();return e&&e.color||n},set background(e){var n=(s=G()(e)).toRgb();t.setClearColor(n.r/255,n.g/255,n.b/255,n.a),t.renderFrame(),le.fire("background-color",s),c.fire("background-color",s)},get background(){return s},add:d,load:function(e,t){var n=Y.parse(c,e,t),i=new he;return i.id=n.place,M.runFromOptions(n).then(function(e){e.setProjector(n.projector),i.setGrid(e)}).catch(function(t){console.error("Could not execute:\n  "+e+"\n  The error was:"),console.error(t),i.destroy()}),d(i),i},saveToPNG:function(e){return t=c,n={name:e},n=n||{},void _e(t).then(function(e){var t=Ce(n.name,".png");e.toBlob(function(e){var n=window.URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=t,i.click(),Se(n)},"image/png")});var t,n},saveToSVG:function(e,t){return function(e,t){t=t||{};var n=ke(e,me()({printable:Le()},t)),i=new Blob([n],{type:"image/svg+xml"}),o=window.URL.createObjectURL(i),r=Ce(t.name,".svg");setTimeout(function(){var e=document.createElement("a");e.href=o,e.download=r,e.click(),Se(o)},30)}(c,g()({},{name:e},t))}};return x()(c);function l(e){return e?a.filter(function(t){return t.id===e}):a}function u(e){var t=l(e);if(t)return t[0]}function d(e){if(!(a.indexOf(e)>-1)&&(e.bindToScene(t),a.push(e),1===a.length)){var n=e.getViewBox();n&&t.setViewBox(n)}}function h(e){e.shiftKey&&(r=!0,i.setSpeed&&i.setSpeed(.1))}function f(e){!e.shiftKey&&r&&(i.setSpeed&&i.setSpeed(1),r=!1)}}var Te="https://edi6jgnosf.execute-api.us-west-2.amazonaws.com/Stage/put_image",Re={mug:"168739066664861503"};function Be(e){var t=e.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,""),n=new FormData;return n.append("image",t),L(Te,{method:"POST",responseType:"json",progress:new C(Function.prototype),body:n}).then(function(e){if(!e.success)throw new Error("Failed to upload image");return function(e,t){var n=Re[e];if(!n)throw new Error("Unknown product kind: "+e);return"https://www.zazzle.com/api/create/at-238058511445368984?rf=238058511445368984&ax=Linkover&pd="+n+"&ed=true&tc=&ic=&t_map_iid="+encodeURIComponent(t)}("mug",e.data.link)}).catch(function(e){throw console.log("error",e),e})}n("YzTF");function Ie(){var e=void 0,t={clickedElement:null,x:0,y:0,time:Date.now(),left:0,right:0};return document.addEventListener("mousedown",i),document.addEventListener("mouseup",r),document.addEventListener("touchstart",a,{passive:!1,capture:!0}),document.addEventListener("touchend",s,!0),document.addEventListener("touchcancel",s,!0),{track:function(e,t){e.style.pointerEvents="none",e.classList.add("can-drag"),t&&t.receiveFocus&&(e.receiveFocus=t.receiveFocus)},dispose:function(){document.removeEventListener("mousedown",i),document.removeEventListener("mouseup",r),document.removeEventListener("touchstart",a),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s),t.clickedElement=void 0,h()},clear:n};function n(){for(var e=document.querySelectorAll(".overlay-active"),t=0;t<e.length;++t)f(e[t])}function i(e){l(e.clientX,e.clientY,e)}function o(e){d(e.clientX,e.clientY)}function r(e){u(e.clientX,e.clientY)}function a(e){if(!(e.touches.length>1)){var t=e.touches[0];l(t.clientX,t.clientY,e)}}function s(e){if(!(e.changedTouches.length>1)){var t=e.changedTouches[0];u(t.clientX,t.clientY)&&(e.preventDefault(),e.stopPropagation())}}function c(e){if(!(e.touches.length>1)){var t=e.touches[0];d(t.clientX,t.clientY),e.preventDefault(),e.stopPropagation()}}function l(i,r,a){for(var s=function(e,t){for(var n=document.querySelectorAll(".can-drag"),i=0;i<n.length;++i){var o=n[i],r=g(o);if(v(e,t,r))return o}}(i,r),l=document.querySelectorAll(".overlay-active"),u=0;u<l.length;++u){var d=l[u];d!==s&&f(d)}1===l.length&&(t.clickedElement=l[0]);var p=s&&s===t.clickedElement;if(p&&(t.clickedElement.contains(a.target)||(s=null,p=!1)),p&&!s.classList.contains("exclusive")?(h(),(e=document.createElement("div")).classList.add("drag-overlay"),document.body.appendChild(e),document.addEventListener("mousemove",o,!0),document.addEventListener("touchmove",c,{passive:!1,capture:!0}),a.preventDefault(),a.stopPropagation()):t.clickedElement=s,t.x=i,t.y=r,t.time=Date.now(),s){var m=s.getBoundingClientRect();t.dx=m.right-t.x,t.dy=m.bottom-t.y}else n()}function u(e,n){if(t.clickedElement){if(h(),function(e,n){return!(Date.now()-t.time>300)&&be()(e-t.x,n-t.y)<40}(e,n))return function(e,t,n){if(!e)return;e.style.pointerEvents="",e.classList.contains("overlay-active")?(e.receiveFocus&&e.receiveFocus(),e.classList.add("exclusive")):(e.classList.add("overlay-active"),e.classList.contains("can-resize"))}(t.clickedElement),!0;t.clickedElement=null}}function d(e,n){if(t.clickedElement){var i=t.clickedElement.style;i.right=100*(window.innerWidth-e-t.dx)/window.innerWidth+"%",i.bottom=100*(window.innerHeight-n-t.dy)/window.innerHeight+"%"}}function h(){e&&(document.body.removeChild(e),e=null),document.removeEventListener("mousemove",o,!0),document.removeEventListener("touchmove",c,{passive:!1,capture:!0})}function f(e){e.style.pointerEvents="none",e.classList.remove("overlay-active"),e.classList.remove("exclusive")}function v(e,t,n){return!(e<n.left||e>n.right||t<n.top||t>n.bottom)}function g(e){return e.getBoundingClientRect()}}var ze=function e(t,n,i){r()(this,e),this.name=t,this.changeColor=i,this.color=n},Pe={name:"App",components:{FindPlace:$,LoadingIcon:f,EditableLabel:oe,ColorPicker:ce},data:function(){return{placeFound:!1,name:"",zazzleLink:null,generatingPreview:!1,showSettings:!1,settingsOpen:!1,labelColor:V.getLabelColor().toRgb(),backgroundColor:V.getBackgroundColor().toRgb(),layers:[]}},computed:{labelColorRGBA:function(){return Ae(this.labelColor)}},created:function(){le.on("scene-transform",this.handleSceneTransform),le.on("background-color",this.syncBackground),le.on("line-color",this.syncLineColor),this.overlayManager=Ie()},beforeDestroy:function(){this.overlayManager.dispose(),this.dispose(),le.off("scene-transform",this.handleSceneTransform),le.off("background-color",this.syncBackground),le.off("line-color",this.syncLineColor)},methods:{dispose:function(){this.scene&&(this.scene.dispose(),window.scene=null)},toggleSettings:function(){this.showSettings=!this.showSettings},handleSceneTransform:function(){this.zazzleLink=null},onGridLoaded:function(e){e.isArea?(U.set("areaId",e.id),U.unset("osm_id"),U.unset("bbox")):e.bboxString&&(U.unset("areaId"),U.set("osm_id",e.id),U.set("bbox",e.bboxString)),this.placeFound=!0,this.name=e.name.split(",")[0];var t=xe();t.style.visibility="visible",this.scene=Ee(t),this.scene.on("layer-added",this.updateLayers),this.scene.on("layer-removed",this.updateLayers),window.scene=this.scene;var n=new he;n.id="lines",n.setGrid(e),this.scene.add(n)},startOver:function(){U.unset("areaId"),U.unsetPlace(),U.unset("q"),U.enableCache(),this.dispose(),this.placeFound=!1,this.zazzleLink=null,this.showSettings=!1,this.backgroundColor=V.getBackgroundColor().toRgb(),this.labelColor=V.getLabelColor().toRgb(),document.body.style.backgroundColor=V.getBackgroundColor().toRgbString(),xe().style.visibility="hidden"},toPNGFile:function(e){scene.saveToPNG(this.name)},toSVGFile:function(e){scene.saveToSVG(this.name)},updateLayers:function(){var e=this,t=[],n=0,i=this.scene.getRenderer();i.getRoot().children.forEach(function(o){if(o.color){var r=o.id;r||(r="lines "+(n+=1));var a=G.a.fromRatio(o.color);t.push(new ze(r,a,function(t){var n;e.zazzleLink=null,o.color={r:(n=t).r/255,g:n.g/255,b:n.b/255,a:n.a},i.renderFrame(),e.scene.fire("color-change",o)}))}}),t.push(new ze("background",this.backgroundColor,this.setBackgroundColor),new ze("labels",this.labelColor,function(t){return e.labelColor=t})),this.layers=t,this.zazzleLink=null},syncLineColor:function(){this.updateLayers()},syncBackground:function(e){this.backgroundColor=e.toRgb(),this.updateLayers()},updateBackground:function(){this.setBackgroundColor(this.backgroundColor),this.zazzleLink=null},setBackgroundColor:function(e){this.scene.background=e,document.body.style.backgroundColor=Ae(e),this.zazzleLink=null},zazzleMugPrint:function(){var e=this;if(this.zazzleLink)return window.open(this.zazzleLink,"_blank"),void Me(this.zazzleLink);this.generatingPreview=!0,_e(this.scene).then(function(t){Be(t).then(function(t){e.zazzleLink=t,window.open(t,"_blank"),Me(t),e.generatingPreview=!1}).catch(function(t){e.error=t,e.generatingPreview=!1})})}}};function Ae(e){return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"}function Me(e){"undefined"!=typeof ga&&ga("send","event",{eventCategory:"Outbound Link",eventAction:"click",eventLabel:e})}var je={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.placeFound?e._e():n("find-place",{on:{loaded:e.onGridLoaded}}),e._v(" "),n("div",{attrs:{id:"app"}},[e.placeFound?n("div",[n("div",{staticClass:"controls"},[n("a",{staticClass:"print-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleSettings(t)}}},[e._v("Customize...")]),e._v(" "),n("a",{staticClass:"try-another",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.startOver(t)}}},[e._v("Try another city")])]),e._v(" "),e.showSettings?n("div",{staticClass:"print-window"},[n("h3",[e._v("Display")]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("Colors")]),e._v(" "),n("div",{staticClass:"col colors c-2"},e._l(e.layers,function(t){return n("div",{key:t.name,staticClass:"color-container"},[n("color-picker",{on:{change:t.changeColor},model:{value:t.color,callback:function(n){e.$set(t,"color",n)},expression:"layer.color"}}),e._v(" "),n("div",{staticClass:"color-label"},[e._v(e._s(t.name))])],1)}),0)]),e._v(" "),n("h3",[e._v("Export")]),e._v(" "),n("div",{staticClass:"row"},[n("a",{staticClass:"col",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.zazzleMugPrint()}}},[e._v("Onto a mug")]),e._v(" "),e._m(0)]),e._v(" "),e.zazzleLink||e.generatingPreview?n("div",{staticClass:"preview-actions message"},[e.zazzleLink?n("div",{staticClass:"padded popup-help"},[e._v("\n              If your browser has blocked the new window, "),n("br"),e._v("please "),n("a",{attrs:{href:e.zazzleLink,target:"_blank"}},[e._v("click here")]),e._v("\n              to open it.\n            ")]):e._e(),e._v(" "),e.generatingPreview?n("div",{staticClass:"loading-container"},[n("loading-icon"),e._v("\n              Generating preview url...\n            ")],1):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"row"},[n("a",{staticClass:"col",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toPNGFile(t)}}},[e._v("As an image (.png)")]),e._v(" "),n("span",{staticClass:"col c-2"},[e._v("\n            Save the current screen as a raster image.\n          ")])]),e._v(" "),n("div",{staticClass:"row"},[n("a",{staticClass:"col",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toSVGFile(t)}}},[e._v("As a vector (.svg)")]),e._v(" "),n("span",{staticClass:"col c-2"},[e._v("\n            Save the current screen as a vector image.\n          ")])]),e._v(" "),e._e(),e._v(" "),n("h3",[e._v("About")]),e._v(" "),e._m(1)]):e._e()]):e._e()]),e._v(" "),e.placeFound?n("editable-label",{staticClass:"city-name",style:{color:e.labelColorRGBA},attrs:{printable:!0,"overlay-manager":e.overlayManager},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):e._e(),e._v(" "),e.placeFound?n("div",{staticClass:"license printable can-drag",style:{color:e.labelColorRGBA}},[e._v("data "),n("a",{style:{color:e.labelColorRGBA},attrs:{href:"https://www.openstreetmap.org/about/",target:"_blank"}},[e._v("© OpenStreetMap")])]):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"col c-2"},[this._v("\n            Print what you see onto a mug. "),t("br"),this._v("Get a unique gift of your favorite city.\n          ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("This website was created by "),n("a",{attrs:{href:"https://twitter.com/anvaka",target:"_blank"}},[e._v("@anvaka")]),e._v(".\n          It downloads roads from OpenStreetMap and renders them with WebGL.\n          ")]),e._v(" "),n("p",[e._v("\n           You can find the entire "),n("a",{attrs:{href:"https://github.com/anvaka/city-roads"}},[e._v("source code here")]),e._v(". \n           If you love this website you can also "),n("a",{attrs:{href:"https://www.paypal.com/paypalme2/anvakos/3"}},[e._v("buy me a coffee")]),e._v(", but you don't have to!\n          ")])])}]};var qe=n("VU/8")(Pe,je,!1,function(e){n("HvW6")},null,null).exports,Oe={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"absolute no-webgl"},[n("h3",[e._v("WebGL is not enabled :(")]),e._v(" "),n("p",[e._v("This website renders millions of roads at once.")]),e._v(" "),n("p",[e._v("\n    To render this amount of data fast, the website uses "),n("a",{attrs:{href:"https://get.webgl.org/"}},[e._v("WebGL")]),e._v(",\n    which seem to be not supported by the device that you are using.\n  ")]),e._v(" "),n("p",[e._v("Please try a different device to play with this website")]),e._v(" "),n("img",{attrs:{src:"https://i.imgur.com/Fbbe5a6.png",alt:"demo"}})])}]};var Ue=n("VU/8")(null,Oe,!1,function(e){n("tvtY")},"data-v-4c133b01",null).exports,De=n("49tl"),Ge=n("skHk");window.addEventListener("error",function(e){if("function"!=typeof ga)return;var t=e?e.message+" in "+e.filename+":"+e.lineno:"Unknown exception";ga("send","exception",{exDescription:t,exFatal:!1})}),i.a.config.productionTip=!1,window.requireModule=De.a,window.Query=M,Ge.isWebGLEnabled(document.querySelector("#canvas"))?new i.a({el:"#app",components:{App:qe},template:"<App/>"}):new i.a({el:"#app",components:{NoWebGL:Ue},template:"<NoWebGL/>"})},WJCp:function(e,t){},YzTF:function(e,t,n){"use strict";(function(e){var t=n("pFYg"),i=n.n(t);!function(t){var o=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,r=t.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),a=r&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),s=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,l=(r||s)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(e){var t,n,i,o,l,u,d,h,f;if(!(t=e.match(c)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),i=!!t[4],o=e.slice(t[0].length),l=i?atob(o):decodeURIComponent(o),u=new ArrayBuffer(l.length),d=new Uint8Array(u),h=0;h<l.length;h+=1)d[h]=l.charCodeAt(h);return r?new Blob([a?d:u],{type:n}):((f=new s).append(u),f.getBlob(n))};t.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(e,t,n){var i=this;setTimeout(function(){n&&o.toDataURL&&l?e(l(i.toDataURL(t,n))):e(i.mozGetAsFile("blob",t))})}:o.toDataURL&&l&&(o.toBlob=function(e,t,n){var i=this;setTimeout(function(){e(l(i.toDataURL(t,n)))})})),"function"==typeof define&&n("nErl")?define(function(){return l}):"object"===i()(e)&&e.exports?e.exports=l:t.dataURLtoBlob=l}(window)}).call(t,n("f1Eh")(e))},Z2f9:function(e,t){},tvtY:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.96200c4b89a1a007c2b1.js.map